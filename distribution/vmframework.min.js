VmFramework={},VmFramework.init=function(n){var t=n.callback,i;VmFramework.itemuid="",VmFramework.appid="",VmFramework.idapp="",VmFramework.ticks="",VmFramework.appuid="",VmFramework.uidapp="",VmFramework.user="",VmFramework.guest=1,VmFramework.owner=1,VmFramework.current_module="",VmFramework.current_form="",VmFramework.current_grid="",VmFramework.current_main="",VmFramework.current_left="",VmFramework.comm=0,VmFramework.itemuid="",VmFramework.appid="",VmFramework.idapp="",VmFramework.ticks="",VmFramework.update_key="",VmFramework.submit_btn="",VmFramework.module_border="0",VmFramework.vm={},VmFramework.root_layout_content_slot="vm_content_slot",g_itemuid="",g_appid="",g_idapp="",g_ticks="",g_appuid="",g_uidapp="",g_user="",g_guest=1,g_owner=1,g_current_module="",g_current_form="",g_current_grid="",g_current_main="",g_current_left="",g_comm=0,g_itemuid="",g_appid="",g_idapp="",g_ticks="",g_update_key="",g_submit_btn="",g_module_border="0",typeof g_vm=="undefined"&&(g_vm={}),$("body").html("<div id=vm_content_slot><\/div><div id=vm_park style='display:none'><\/div>"),g_vm.root_layout_content_slot="vm_content_slot",g_vm_path_app=location.href.substring(0,location.href.lastIndexOf("/")+1),g_vm_api_url!=""&&(g_vm_path_app=g_vm_api_url.replace("api.aspx","")),$("html").bind("ajaxStart",function(){$(this).addClass("busy")}).bind("ajaxStop",function(){$(this).removeClass("busy")}),i={cmd:"data2",action:"user_name"},$(this).vm7("request",i,function(n){g_user=n.user_name,g_user_id=n.user_id,g_vm_ver=n.ver,g_user=n.user_name,g_user_id=n.user_id,g_vm_ver=n.ver,t!==undefined&&t()})},VmFramework.jquery_validator_init=function(){$.validator.addMethod("regex",function(n,t,i){var r=new RegExp(i[0]);return this.optional(t)||r.test(n)},$.validator.format("{1}")),$.validator.setDefaults({ignore:"",errorPlacement:function(n,t){t.attr("type")=="radio"?(t.parent().append("<br>"),n.appendTo(t.parent())):n.insertAfter(t)}})},VmFramework.load_module=function(n){var t=n.pid,f=n.slot,r=n.input,e=n.url,o=n.base,u,i;if($("#D"+t).length==0&&(VmFramework.vm[t]={}),VmFramework.vm[t].parent_uid=undefined,VmFramework.vm[t].parent_name="",VmFramework.vm[t].excel_dialog="",r!=undefined)for(u in r)VmFramework.vm[t][u]=r[u];jQuery.ajaxSetup({async:!1}),$("#D"+t).length==0&&($.get(e+"?ver="+VmFramework.ver,function(n){i=VmFramework.load_include({content:n}),i=i.replace(/__ID__/g,t),i=i.replace(/__ID/g,t),i=i.replace(/__BASE__/g,o)}),i=i.replace(/<!--([\s\S]*?)-->/mig,""),i="<div id=D"+t+" class=vm_module>"+i+"<\/div>",$("#D"+t).remove(),$("#vm_park").append($(i)),typeof window["F"+t]=="function"&&eval("F"+t+"()")),f!="body"&&VmFramework.insert_module({pid:t,slot:f}),$("#D"+t).triggerHandler("load"),jQuery.ajaxSetup({async:!0})},VmFramework.load_include=function(n){for(var f=n.content,i=f.split("\n"),r,u,t=0;t<i.length;t++)i[t].length>10&&(i[t].indexOf("VmAppInclude:")!==-1?(r=i[t].replace("VmAppInclude:",""),r=VmFramework.app_base+r,$.get(r+"?ver="+VmFramework.ver,function(n){i[t]=n},"text")):i[t].indexOf("VmCommonInclude:")!==-1&&(r=i[t].replace("VmCommonInclude:",""),r=VmFramework.common_base+r,$.get(r+"?ver="+VmFramework.ver,function(n){i[t]=n},"text")));for(u="",t=0;t<i.length;t++)u+=i[t]+"\n";return u},VmFramework.insert_module=function(n){var i=n.pid,t=n.slot,r;i!==undefined&&t!==undefined&&t!=""&&(r=$("#"+t).data("current"),r!==undefined&&VmFramework.push_back_to_park({div:r}),VmFramework.push_to_slot({div:i,slot:t}),$("#"+t).data("current",i),$("#D"+i).data("back_module",r),$("#D"+i).data("back_slot",t))},VmFramework.push_back_to_park=function(n){var t=n.div;$("#D"+t).length>0&&$("#D"+t).appendTo("#vm_park")},VmFramework.push_to_slot=function(n){var i=n.div,t=n.slot;$("#"+t).html(""),$("#D"+i).appendTo("#"+t)}